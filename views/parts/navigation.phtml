<?php $mapInfo = Cache::get("maps") ?>
<a href="/changelog" class="nav_button">
    <div id="time_icon" class="nav_icon"></div>
    <div class="btnLabel">Score Updates</div>
</a>
<a href="/campaign" class="nav_button">
    <div id="sp_icon" class="nav_icon"></div>
    <div class="btnLabel">Campaign</div>
</a>
<div class="nav_dropdown">
    <div id="cube_icon" class="nav_icon"></div>
    <div class="btnLabel">Aggregated</div>
    <ul style="width:150px">
      <li>
          <a href="/aggregated/overall" style="height: 29px">
            <div class="nav_icon" style="background: url('/images/cakeicon.png'); background-size: 29px 29px;"></div>
            <div class="btnLabel">Overall</div>
          </a>
      </li>
      <li class="nav_dropdown">
          <div style="height: 29px">
              <div class="nav_icon" style="background: url('/images/sp_noborder.jpg'); background-size: 29px 29px;"></div>
              <div class="btnLabel">Campaign</div>
          </div>
          <ul style="width:190px">
              <li>
                <a href="/aggregated/campaign">
                    <div class="nav_icon"><i class="fa fa-star" aria-hidden="true"></i></div>
                    <div class="btnLabel">Total</div>
                </a>
              </li>
              <?php $i = 1; foreach ($mapInfo["modes"]["campaign"] as $chapter): ?>
                  <li>
                      <a href="/aggregated/chapter/<?=$chapter?>">
                        <div class="nav_icon"><?=$i?></div>
                        <div class="btnLabel"><?=$mapInfo["chapters"][$chapter]["chapterName"]?> </div>
                      </a>
                  </li>
              <?php $i++; endforeach; ?>
          </ul>
      </li>
    </ul>
</div>

<style>
  .donator_icon {
      background: url('/images/cakeicon.png');
      background-position: center;
      background-size: 25px 25px !important;
      width: 25px !important;
      height: 25px !important;
      margin: 2px;
  }
</style>
<a href="/about" class="nav_button">
    <div class="nav_icon" style="background: url('/images/cupcake.png'); background-size: 29px 29px;"></div>
    <div class="btnLabel">About</div>
</a>
<div class="nav_dropdown">
    <div id="aperture_icon" class="nav_icon"></div>
    <div class="btnLabel">More</div>
    <ul style="width:230px">
      <li class="nav_dropdown">
          <a href="https://board.portal2.sr" target="_blank" style="height: 29px">
              <div class="nav_icon">P2</div>
              <div class="btnLabel">Portal 2</div>
          </a>
      </li>
      <li class="nav_dropdown">
          <a href="https://aptag.board.nekz.me" target="_blank" style="height: 29px">
              <div class="nav_icon">AT</div>
              <div class="btnLabel">Aperture Tag</div>
          </a>
      </li>
      <li class="nav_dropdown">
          <a href="https://reloaded.board.nekz.me" target="_blank" style="height: 29px">
              <div class="nav_icon">PR</div>
              <div class="btnLabel">Portal Reloaded</div>
          </a>
      </li>
      <li class="nav_dropdown">
          <a href="https://mel.board.nekz.me" target="_blank" style="height: 29px">
              <div class="nav_icon">PS</div>
              <div class="btnLabel">Portal Stories: Mel</div>
          </a>
      </li>
      <li class="nav_dropdown">
          <a href="https://twtm.board.nekz.me" target="_blank" style="height: 29px">
              <div class="nav_icon">TW</div>
              <div class="btnLabel">Thinking with Time Machine</div>
          </a>
      </li>
      <li class="nav_dropdown">
          <a href="https://www.speedrun.com/twtm" target="_blank" style="height: 29px">
              <div class="nav_icon" style="background: url('/images/running.png'); background-size: 29px 29px;"></div>
              <div class="btnLabel">Full Game Runs</div>
          </a>          
      </li>
      <li class="nav_dropdown">
          <a href="https://discord.gg/p2sr" target="_blank" style="height: 29px">
              <div class="nav_icon" style="background: url('/images/discord_noborder.png'); background-size: 29px 29px;"></div>
              <div class="btnLabel">Discord</div>
          </a>          
      </li>
        <li class="nav_dropdown">
          <a href="https://github.com/NeKzor/board" target="_blank" style="height: 29px">
              <div class="nav_icon" style="background: url('/images/github.png'); background-size: 29px 29px;"></div>
              <div class="btnLabel">GitHub</div>
          </a>          
      </li>
    </ul>
</div>

<!--<div class="nav_dropdown">-->
<!--    <div id="lp_icon" class="nav_icon"></div>-->
<!--    <div class="label">Least Portals</div>-->
<!--    <ul style="width:150px">-->
<!--        <li>-->
<!--            <a href="/lp/sp" style="height: 29px">-->
<!--                <div class="nav_icon" style="background: url('/images/sp_noborder.jpg'); background-size: 29px 29px;"></div>-->
<!--                <div class="label">Single Player</div>-->
<!--            </a>-->
<!--        </li>-->
<!--        <li>-->
<!--            <a href="/lp/coop" style="height: 29px">-->
<!--                <div class="nav_icon" style="background: url('/images/coop_noborder.jpg'); background-size: 29px 29px;"></div>-->
<!--                <div class="label">Cooperative</div>-->
<!--            </a>-->
<!--        </li>-->
<!--    </ul>-->
<!--</div>-->

<!--<a href="/lp" class="nav_button">-->
<!--    <div id="lp_icon" class="nav_icon"></div>-->
<!--    <div class="label">Least Portals</div>-->
<!--</a>-->

<!-- <a href="/about" class="nav_button">
    <div id="aperture_icon" class="nav_icon"></div>
    <div class="btnLabel">About</div>
</a> -->


<script>

    // $(".nav_dropdown").click(function(event) {
    //
    //     var $dropDownContent = $(this).find("> ul");
    //     var isVisible = $dropDownContent.css("visibility") == "visible";
    //
    //     if (!isVisible) {
    //         //$dropDownContent.css("visibility", "visible");
    //         $dropDownContent.addClass("clicked");
    //     }
    //     else if ($dropDownContent.hasClass("clicked")) {
    //         $(this).parent().find(".nav_dropdown ul").css("visibility", "hidden");
    //         $dropDownContent.css("visibility", "hidden");
    //         $dropDownContent.removeClass("clicked");
    //     }
    //
    //     event.stopPropagation();
    // });

    $(".nav_dropdown").hover(function(event) {
        var $dropDownContent = $(this).find("> ul");
        $dropDownContent.css("visibility", "visible");
        
    }, function(event) {
        $(this).find("ul").css("visibility", "hidden");
    });

</script>